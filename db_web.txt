
create table Users(
	id_user varchar(10),
	password_user varchar(50),
	fullname varchar(50),
	phone_number varchar(12)

);
ALTER TABLE Users ADD PRIMARY KEY (id_user);


create table Trip(
	id_trip varchar(10),
	id_garage varchar(10),
	trip_name varchar(50),
	place_depart varchar(50),
	place_arrive varchar(50),
	trip_description text,
	total_time int,
	rating float

);
ALTER TABLE Trip ADD PRIMARY KEY (id_trip);


create table Trip_comment(
	id_trip varchar(10),
	id_user varchar(10),
	comment text,
	rating float,
	Times time

);
ALTER TABLE Trip_comment ADD PRIMARY KEY (id_user, id_trip);


create table Garage(
	id_garage varchar(10),
	garage_name varchar(50),
	rate float,
	phone_number varchar(12)

);
ALTER TABLE Garage ADD PRIMARY KEY (id_garage);


create table Garage_comment(
	id_garage varchar(10),
	id_user varchar(10),
	comment text,
	rating float,
	Times time

);
ALTER TABLE Garage_comment ADD PRIMARY KEY (id_user, id_garage);


create table Car(
	id_car varchar(10),
	id_trip varchar(10),
	time_depart timestamp,
	time_arrive timestamp,
	type_car varchar(20),
	cost int

);
ALTER TABLE Car ADD PRIMARY KEY (id_car);


create table Promotion(
	id_car varchar(10),
	discount float,
	expiry timestamp

);
ALTER TABLE Promotion ADD PRIMARY KEY (id_car);


create table Seat(
	id_car varchar(10),
	seat varchar(10)

);
ALTER TABLE Seat ADD PRIMARY KEY (id_car, seat);


create table Ticket(
	id_user varchar(10),
	id_ticket varchar(10),
	id_car varchar(10),
	position_seat varchar(10),
	status_ticket varchar(20),
	price int

);
ALTER TABLE Ticket ADD PRIMARY KEY (id_ticket);

create table History(
	id_ticket varchar(10),
	id_user varchar(10),
	rating float,
	comment text

);
ALTER TABLE History ADD PRIMARY KEY (id_user, id_ticket);

alter table Trip
add
constraint FK_trip_garage foreign key(id_garage) references Garage;

alter table Car
add
constraint FK_car_trip foreign key(id_trip) references Trip;

alter table Seat
add
constraint FK_Seat_Car foreign key(id_car) references Car;

alter table Trip_Comment
add
constraint FK_tripcomment_trip foreign key(id_trip) references Trip;
alter table Trip_Comment
add
constraint FK_tripcomment_user foreign key(id_user) references Users;

alter table Garage_comment
add
constraint FK_garagecomment_garage foreign key(id_garage) references Garage;
alter table Garage_Comment
add
constraint FK_garagecomment_user foreign key(id_user) references Users;

alter table Promotion
add
constraint FK_Promotion_Car foreign key(id_car) references Car;

alter table Ticket
add
constraint FK_ticket_user foreign key(id_user) references Users;
alter table Ticket
add
constraint FK_ticket_seat foreign key(id_car, position_seat) references Seat(id_car, seat);

alter table History
add
constraint FK_History_Ticket foreign key(id_ticket) references Ticket;
alter table History
add
constraint FK_History_Users foreign key(id_user) references Users;


